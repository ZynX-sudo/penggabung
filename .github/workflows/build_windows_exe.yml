name: Build Windows Executable

on:
  push:
    branches:
      - main # Jalankan workflow setiap kali ada push ke branch 'main'
  workflow_dispatch: # Izinkan menjalankan workflow secara manual dari GitHub UI

jobs:
  build:
    runs-on: windows-latest # Gunakan runner Windows terbaru dari GitHub

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4 # Mengunduh kode (termasuk PDFTK.exe) dari repositori Anda

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10' # Anda bisa ganti ini dengan versi Python 3.x yang Anda inginkan

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          pip install pyinstaller # PyInstaller diinstal terpisah untuk memastikan

      # Karena PDFTK.exe sudah ada di repositori, langkah download tidak diperlukan.

      - name: Build executable with PyInstaller
        # PDFTK.exe sudah di-checkout di root folder kerja bersama kode Anda.
        run: |
          python -m pyinstaller --noconsole --onefile --windowed --add-binary "PDFTK.exe;." --name "PDFMergeTool" penggabung.py

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: PDFMergeTool-Windows-Executables
          path: dist/PDFMergeTool.exe # Lokasi file .exe yang dihasilkan